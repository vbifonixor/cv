---
import { type CollectionEntry, render, getEntry } from "astro:content";

import { ExternalLinkIcon } from "@lucide/astro";

interface Props {
  id: CollectionEntry<"orgs">["id"];
}

const org = await getEntry("orgs", Astro.props.id);

const { Content: OrgContent } = org ? await render(org) : { Content: null };

if (!org || !OrgContent) {
  return null;
}
---

<div
  class="col-span-full grid grid-cols-subgrid border-t border-dashed border-zinc-200 md:col-span-2 print:col-span-2"
>
  <div
    class="hidden h-full place-self-start self-center border-l-2 border-zinc-100 pt-3 md:block print:block"
  >
  </div>
  <div class="flex flex-col gap-1 pt-3">
    <h3
      class="text-sm uppercase underline decoration-blue-500/40 decoration-1 underline-offset-4 transition-colors hover:text-blue-500"
    >
      <a href={org.data.link} class="flex items-center-safe gap-[1ch]">
        {org.data.name}
        <ExternalLinkIcon size={12} />
      </a>
    </h3>
    <div class="prose -mt-1 text-xs text-zinc-400">
      <OrgContent />
    </div>
  </div>
</div>
